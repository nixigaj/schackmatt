<!DOCTYPE html>
<html>
<head>
    <title>Schackmatt - The Game</title>
    <link rel="stylesheet" href="lib/chessboard-1.0.0.min.css" />
    <style>


        body {

        }

        #startBtn {
            display: flex;
            position: absolute;
            top: 20px;
            right: 75px;
        }

        #clearBtn{
            display: flex;
            position: absolute;
            top: 20px;
            right: 0;
        }


        #timer-container {

                margin-left: auto;
                margin-top: 20%;
                width: 200px;
                height: 100px;
                display: flex;
                align-items: center;
                color: #000000;
                max-width: 400px;
                border-radius: 8px;

                justify-content: center;
                background-color: #FFFFFF;
                box-shadow: inset 3px 3px 0 #000,
                inset -3px 3px 0 black,
                inset -3px -3px 0 black,
                inset 3px -3px 0 black;

            }
        #timer-container1 {

            margin-left: auto;
            width: 200px;
            height: 100px;
            display: flex;
            align-items: center;
            color: #000000;
            max-width: 400px;
            border-radius: 8px;

            justify-content: center;
            background-color: #FFFFFF;
            box-shadow: inset 3px 3px 0 #000,
            inset -3px 3px 0 black,
            inset -3px -3px 0 black,
            inset 3px -3px 0 black;

        }

            #timer {

                font-size: 5rem;
                font-weight: bold;

            }

            #timer1 {

                font-size: 5rem;
                font-weight: bold;
                color: #000000;


            }

            #timer_start_Btn {

                 margin-left: auto;
                 width: 100%;
                 display: block;
                 color: #020202;
                 min-height: 50px;
                 max-width: 200px;
                 font-size: 1.5rem;
                 font-weight: bold;
                 border-radius: 4px;
                 letter-spacing: 2px;

                 border: 1px solid #000000;
            }
             #timer_start_Btn {
                 color: #ffffff;
                 background-color: #0071D5;
             }

        #timer_start_Btn:hover {
            color: #000000;
            background-color: #FFFFFF;
        }

        footer p {

             text-align: right;
             color: black;


         }


    </style>

</head>


<body>

<div id="board1" style="width: 400px"></div>
<div id="timer-container">
    <div id="timer">03:00</div>
</div>

<div id="timer-container1">
    <div id="timer1">03:00</div>
</div>


<button id="startBtn">Start Position</button>
<button id="clearBtn">Clear Board</button>
<button id="timer_start_Btn">START GAME</button>

<footer>

    <p>Press spacebar after a move to switch player's clock</p>

</footer>


<script src="lib/chessboard-1.0.0.min.js"></script>
<script src="lib/chess.min.js"></script>
<script src="lib/jquery-3.6.3.js"></script>


<script>

const board2 = Chessboard('board2', {
    draggable: true,
    dropOffBoard: 'trash',
    sparePieces: true
});

$('#startBtn').on('click', board2.start);
$('#clearBtn').on('click', board2.clear);


let playing = true;
let currentPlayer = 1;

let starttime= 180;
let starttime1= 180;

function Playerswap() {
    if (playing) {
        return currentPlayer = currentPlayer === 1 ? 2 : 1;
    }
}

    document.getElementById("timer_start_Btn").addEventListener("click", function() {
        document.getElementById("timer_start_Btn").style.display = "none";



        let timer2 = setInterval(function () {
            let minutes = Math.floor(starttime / 60);
            let seconds = starttime % 60;
            let clocktime = (minutes < 10 ? "0" + minutes : minutes) + ":" + (seconds < 10 ? "0" + seconds : seconds);

            let minutes1 = Math.floor(starttime1 / 60);
            let seconds1 = starttime1 % 60;
            let clocktime1 = (minutes1 < 10 ? "0" + minutes1 : minutes1) + ":" + (seconds1 < 10 ? "0" + seconds1 : seconds1);



            if (currentPlayer === 1) {
                document.getElementById("timer1").innerHTML = clocktime;
                starttime = starttime - 1;

                if (starttime <= 30) {
                   document.getElementById("timer1").style.color = "#CC0000";
                }
                if (starttime <= 0) {
                    clearInterval(timer2);
                    alert("LOST THE GAME\n You lost on time");



            }

        }

            if (currentPlayer === 2) {
                document.getElementById("timer").innerHTML = clocktime1;
                starttime1 = starttime1 - 1;

                if (starttime <= 30) {
                    document.getElementById("timer").style.color = "#CC0000";
                }
                if (starttime <= 0) {
                    clearInterval(timer2);
                    alert("LOST THE GAME\n You lost on time");



                }

            }





        }, 1000);
    },)

document.addEventListener('keyup', event => {
    if (event.code === 'Space') {
        Playerswap();
    }
});


</script>

</body>

</html>


