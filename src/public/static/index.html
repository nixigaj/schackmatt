<!DOCTYPE html>
<html lang="en">
<head>
    <title>Schackmatt - The Game</title>
    <link rel="stylesheet" href="lib/chessboard-1.0.0.min.css" />
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/smoothness/jquery-ui.css">

    <style>


        body {

        }

        #startBtn {
            margin-left: auto;
            width: 100%;
            display: block;
            color: #020202;
            min-height: 50px;
            max-width: 200px;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 4px;
            letter-spacing: 2px;

            border: 1px solid #000000;
        }

        #startBtn {
            color: #ffffff;
            background-color: #0071D5;
        }

        #startBtn:hover {
            color: #000000;
            background-color: #FFFFFF;
        }

        #clearBtn {
            margin-left: auto;
            width: 100%;
            display: block;
            color: #020202;
            min-height: 50px;
            max-width: 200px;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 4px;
            letter-spacing: 2px;

            border: 1px solid #000000;

        }

        #clearBtn {
            color: #ffffff;
            background-color: #0071D5;
        }

        #clearBtn:hover {
            color: #000000;
            background-color: #FFFFFF;
        }

        #resignBtn {
            margin-left: auto;
            width: 100%;
            display: block;
            color: #020202;
            min-height: 50px;
            max-width: 200px;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 4px;
            letter-spacing: 2px;

            border: 1px solid #000000;
        }

        #resignBtn {
            color: #ffffff;
            background-color: #0071D5;
        }

        #resignBtn:hover {
            color: #000000;
            background-color: #FFFFFF;
        }


        #timer-container {

                margin-left: auto;
                margin-top: 20%;
                width: 200px;
                height: 100px;
                display: flex;
                align-items: center;
                color: #000000;
                max-width: 400px;
                border-radius: 8px;

                justify-content: center;
                background-color: #FFFFFF;
                box-shadow: inset 3px 3px 0 #000,
                inset -3px 3px 0 black,
                inset -3px -3px 0 black,
                inset 3px -3px 0 black;

            }
        #timer-container1 {

            margin-left: auto;
            width: 200px;
            height: 100px;
            display: flex;
            align-items: center;
            color: #000000;
            max-width: 400px;
            border-radius: 8px;

            justify-content: center;
            background-color: #FFFFFF;
            box-shadow: inset 3px 3px 0 #000,
            inset -3px 3px 0 black,
            inset -3px -3px 0 black,
            inset 3px -3px 0 black;

        }

            #timer {

                font-size: 5rem;
                font-weight: bold;

            }

            #timer1 {

                font-size: 5rem;
                font-weight: bold;
                color: #000000;


            }

            #timer_start_Btn {

                 margin-left: auto;
                 width: 100%;
                 display: block;
                 color: #020202;
                 min-height: 50px;
                 max-width: 200px;
                 font-size: 1.5rem;
                 font-weight: bold;
                 border-radius: 4px;
                 letter-spacing: 2px;

                 border: 1px solid #000000;
            }
             #timer_start_Btn {
                 color: #ffffff;
                 background-color: #0071D5;
             }

        #timer_start_Btn:hover {
            color: #000000;
            background-color: #FFFFFF;
        }

        footer p{
            position: absolute;
            bottom: 20px;
            right: 0;
            left: 0;
            text-align: center;
        }


    </style>

</head>


<body>

<footer>

    <p>Press spacebar after a move to switch player's clock</p>

</footer>

<div id="board1" style="width: 200px"></div>
<div id="timer-container">
    <div id="timer">03:00</div>
</div>

<div id="timer-container1">
    <div id="timer1">03:00</div>
</div>


<div id="confirm_Btn" title="Resign?">
</div>

<div id="dialog-confirm" title="Are you sure you want to resign?">


<button id="timer_start_Btn">START GAME</button>
<button id="resignBtn">RESIGN</button>
<button id="startBtn">START POSITION</button>
<button id="clearBtn">CLEAR BOARD</button>


<script src="lib/chessboard-1.0.0.min.js"></script>
<script src="lib/chess.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>

<script>


        let playing = true;
        let currentPlayer = 1;

        let starttime = 180;
        let starttime1 = 180;

        function Playerswap() {
            if (playing) {
                return currentPlayer = currentPlayer === 1 ? 2 : 1;
            }
        }

        document.getElementById("timer_start_Btn").addEventListener("click", function () {
            document.getElementById("timer_start_Btn").style.display = "none";


            let timer2 = setInterval(function () {
                let minutes = Math.floor(starttime / 60);
                let seconds = starttime % 60;
                let clocktime = (minutes < 10 ? "0" + minutes : minutes) + ":" + (seconds < 10 ? "0" + seconds : seconds);

                let minutes1 = Math.floor(starttime1 / 60);
                let seconds1 = starttime1 % 60;
                let clocktime1 = (minutes1 < 10 ? "0" + minutes1 : minutes1) + ":" + (seconds1 < 10 ? "0" + seconds1 : seconds1);


                if (currentPlayer === 1) {
                    document.getElementById("timer1").innerHTML = clocktime;
                    starttime = starttime - 1;

                    if (starttime <= 30) {
                        document.getElementById("timer1").style.color = "#CC0000";
                    }
                    if (starttime <= 0) {
                        clearInterval(timer2);
                        alert("LOST THE GAME\n You lost on time");


                    }

                }

                if (currentPlayer === 2) {
                    document.getElementById("timer").innerHTML = clocktime1;
                    starttime1 = starttime1 - 1;

                    if (starttime1 <= 30) {
                        document.getElementById("timer").style.color = "#CC0000";
                    }
                    if (starttime1 <= 0) {
                        clearInterval(timer2);
                        alert("LOST THE GAME\n You lost on time");


                    }

                }

                document.getElementById("resignBtn").addEventListener("click", function () {
                    clearInterval(timer2);
                });


            }, 1000);
        },)

        document.addEventListener('keyup', event => {
            if (event.code === 'Space') {
                Playerswap();
            }
        });

        $( function() {
            $(document).ready(function() {
                $("#resignBtn").click(function() {
                    $("#confirm_Btn").dialog({
                        resizable: false,
                        height: "auto",
                        width: 400,
                        modal: true,
                        buttons: {
                            "Cancel": function () {
                                $(this).dialog("close");
                            },
                            "Resign": function () {
                                $("#dialog-confirm").dialog({
                                    resizable: false,
                                    height: auto,
                                    width: 300,
                                    modal: true,

                                });
                                // Handle resign button click here
                                $(this).dialog("close");

                            }
                        }
                        })
                    });
                });
            });

</script>

</body>

</html>


